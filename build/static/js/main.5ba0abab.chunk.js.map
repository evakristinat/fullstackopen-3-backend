{"version":3,"sources":["components/Filter.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","search","handleSearchChange","type","value","onChange","NewPerson","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","minLength","Persons","personsToShow","removePerson","map","person","name","number","id","onClick","Notification","message","error","className","baseUrl","personsService","getAll","axios","get","then","response","data","create","newObject","post","update","put","remove","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setSearch","setMessage","setError","useEffect","initialPersons","catch","notificationTimeOut","nameDoubles","findIndex","trim","numberDoubles","emptyInputs","seconds","setTimeout","match","filter","includes","toLowerCase","updatePerson","find","n","changedPerson","status","Error","event","target","preventDefault","personObject","window","confirm","console","log","returnedPerson","concat","userId","parseInt","selectedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5ba0abab.chunk.js","sourcesContent":["import React from 'react';\r\n\r\n//Tätä komponenttia voidaan käyttää monissa muissakin yhteyksissä, joten se on erillinen moduulinsa\r\nconst Filter = ({ search, handleSearchChange }) => {\r\n  return (\r\n    <>\r\n      <label>filter shown with</label>\r\n      <input type=\"search\" value={search} onChange={handleSearchChange} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst NewPerson = ({\r\n  addPerson,\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <label>name: </label>\r\n      <input type=\"text\" value={newName} onChange={handleNameChange} />\r\n\r\n      <label>number:</label>\r\n      <input\r\n        type=\"tel\"\r\n        minLength=\"10\"\r\n        value={newNumber}\r\n        onChange={handleNumberChange}\r\n      />\r\n\r\n      <button type=\"submit\">add</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst Persons = ({ personsToShow, removePerson }) => {\r\n  return (\r\n    <table>\r\n      <tbody>\r\n        {personsToShow.map((person) => (\r\n          <tr key={person.id}>\r\n            <td key={person.name}>{person.name}</td>\r\n            <td key={person.number}>{person.number}</td>\r\n            <td>\r\n              <button value={person.id} onClick={removePerson}>\r\n                delete\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport { NewPerson, Persons };\r\n","import React from 'react';\r\n\r\nconst Notification = ({ message, error }) => {\r\n  if (message) {\r\n    return <div className=\"success\">{message}</div>;\r\n  } else if (error) {\r\n    return <div className=\"error\">{error}</div>;\r\n  } else return null;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from 'axios';\r\nconst baseUrl = 'http://localhost:3001/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst personsService = { getAll, create, update, remove };\r\n\r\nexport default personsService;\r\n","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Filter from './components/Filter';\nimport { NewPerson, Persons } from './components/Persons';\nimport Notification from './components/Notification';\nimport personsService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [search, setSearch] = useState('');\n  const [message, setMessage] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then((initialPersons) => {\n        setPersons(initialPersons);\n      })\n      .catch((error) => {\n        setError(`The data from the server couldn't be reached`);\n        notificationTimeOut(5);\n      });\n  }, []);\n\n  const loadPersons = () => {\n    personsService\n      .getAll()\n      .then((initialPersons) => {\n        setPersons(initialPersons);\n      })\n      .catch((error) => {\n        setError(`The data from the server couldn't be reached`);\n        notificationTimeOut(5);\n      });\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = (event) => {\n    setSearch(event.target.value);\n  };\n\n  const nameDoubles = () =>\n    persons.findIndex((person) => person.name === newName.trim()) > -1;\n\n  const numberDoubles = () =>\n    persons.findIndex((person) => person.number === newNumber.trim()) > -1;\n\n  const emptyInputs = () => {\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const notificationTimeOut = (seconds = 5) => {\n    setTimeout(() => {\n      setMessage(null);\n      setError(null);\n    }, seconds * 1000);\n  };\n\n  /*Haku tehdään numeron perusteella jos search-kenttään syötetään numeroita.\n    Jos numeroita ei ole, haku tehdään case-insensitiivisesti muuttamalla vertailua\n    varten hakukohteiden nimet ja hakukentän tekstin lowercase-muotoon.*/\n  const personsToShow = search.match(/\\d/)\n    ? persons.filter((person) => person.number.includes(search))\n    : typeof search === 'string'\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(search.toLowerCase())\n      )\n    : persons;\n\n  const removePerson = (event) => {\n    const userId = parseInt(event.target.value);\n    const selectedPerson = persons.find((person) => person.id === userId);\n\n    window.confirm(`Delete ${selectedPerson.name} ?`)\n      ? personsService\n          .remove(userId)\n          .then(() => {\n            setPersons(persons.filter((person) => person.id !== userId));\n            setMessage(`Successfully deleted ${selectedPerson.name}`);\n            notificationTimeOut(3);\n          })\n          .catch((error) => {\n            setError(\n              'The person could not be found. Please refresh and retry.'\n            );\n            notificationTimeOut();\n          })\n      : console.log('Delete canceled');\n  };\n\n  /*addPerson lisää henkilön, mikäli tietoja ei ole jo lisätty ja muokkaa tietoja\n  jos nimi on jo tiedoissa. */\n  const addPerson = (event) => {\n    event.preventDefault();\n    /*henkilöt ladataan tässä kohtaa uudestaan varmistukseksi,\n    että tietoja ei voi lisätä tuplana yhtä aikaa toisella selaimella.\n    Tämän voisi toteuttaa myös muutamalla useEffectin päivitysehdon sopivaksi.\n    Sillä itseasiassa korjattaisiin muitakin päivitykseen liittyviä bugeja.*/\n    loadPersons();\n\n    if (newName && newNumber) {\n      const personObject = {\n        name: newName.trim(),\n        number: newNumber.trim(),\n      };\n\n      //jos nimi ja numero ovat uusia (ei tuplia) luodaan uusi henkilö\n      if (!nameDoubles() && !numberDoubles()) {\n        personsService\n          .create(personObject)\n          .then((returnedPerson) => {\n            setPersons(persons.concat(returnedPerson));\n            setMessage(`${returnedPerson.name} was successfully added`);\n            notificationTimeOut(3);\n          })\n          .catch((error) => {\n            setError('No data could be found');\n            notificationTimeOut(6);\n          });\n      } else if (nameDoubles() && !numberDoubles()) {\n        //jos nimi esiintyy tuplana, mutta syötetty numero on uusi, kysytään halutaanko päivittää.\n        window.confirm(\n          `${personObject.name} is already added to phonebook, replace the old number with a new one?`\n        )\n          ? updatePerson(personObject.number, personObject.name)\n          : console.log('canceled');\n      } else if (!nameDoubles() && numberDoubles()) {\n        //jos numero esiintyy tuplana, mutta nimi ei, ei lisäystä hyväksytä.\n        setError(`Given phonenumber is already in use`);\n        notificationTimeOut();\n      } else if (nameDoubles() && numberDoubles()) {\n        //jos mitkään ylläolevista ehdoista eivät täyty, molemmat tiedot ovat jo lisätty, eikä lisäystä hyväksytä.\n        setError(`${newName.trim()} has already been added to phonebook`);\n        notificationTimeOut();\n      }\n      emptyInputs();\n    }\n  };\n\n  /*\n  Etsii id:n kenttässä nimen perusteella ja päivittää sen perusteella\n  oikean henkilön.\n  */\n  const updatePerson = (number, name) => {\n    const id = persons.find((person) => person.name === name).id;\n    const person = persons.find((n) => n.id === id);\n    const changedPerson = { ...person, number: number };\n\n    personsService\n      .update(id, changedPerson)\n      .then((response) => {\n        if (response.status === 404) {\n          /* axios ei ilmoita tilaa 404 virheenä, joten se on määritettävä\n          sellaiseksi itse*/\n          throw new Error('404');\n        } else {\n          setPersons(persons.map((n) => (n.id !== id ? n : response.data)));\n          setMessage(`${person.name}'s number was successfully updated`);\n        }\n      })\n      .catch((error) => {\n        setError(`Information of ${person.name} has already been deleted`);\n        notificationTimeOut(5);\n      });\n    emptyInputs();\n  };\n\n  return (\n    <main>\n      <h2>Phonebook</h2>\n\n      <Filter search={search} handleSearchChange={handleSearchChange} />\n\n      <div className=\"notification-box\"> \n      <Notification message={message} error={error} />\n      </div>\n      \n      <h3>Add new</h3>\n      <NewPerson\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h3>Numbers</h3>\n      <Persons\n        personsToShow={personsToShow}\n        removePerson={removePerson}\n        setPersons={setPersons}\n      />\n    </main>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css';\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}