(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),a=t(7),o=t(3),u=t(2),i=(t(21),t(0)),s=function(e){var n=e.search,t=e.handleSearchChange;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("label",{children:"filter shown with"}),Object(i.jsx)("input",{type:"search",value:n,onChange:t})]})},l=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,r=e.handleNameChange,a=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsx)("label",{children:"name: "}),Object(i.jsx)("input",{type:"text",value:t,onChange:r}),Object(i.jsx)("label",{children:"number:"}),Object(i.jsx)("input",{type:"tel",minLength:"8",value:c,onChange:a}),Object(i.jsx)("button",{type:"submit",children:"add"})]})},d=function(e){var n=e.personsToShow,t=e.removePerson;return Object(i.jsx)("table",{children:Object(i.jsx)("tbody",{children:n.map((function(e){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.name},e.name),Object(i.jsx)("td",{children:e.number},e.number),Object(i.jsx)("td",{children:Object(i.jsx)("button",{value:e.id,onClick:t,children:"delete"})})]},e.id)}))})})},h=function(e){var n=e.message,t=e.error;return n?Object(i.jsx)("div",{className:"success",children:n}):t?Object(i.jsx)("div",{className:"error",children:t}):null},b=t(4),f=t.n(b),j="/api/persons",m={getAll:function(){return f.a.get(j).then((function(e){return e.data}))},create:function(e){return f.a.post(j,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(j,"/").concat(e),n).then((function(e){return e}))},remove:function(e){return f.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))}},O=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),b=Object(o.a)(r,2),f=b[0],j=b[1],O=Object(u.useState)(""),p=Object(o.a)(O,2),x=p[0],v=p[1],g=Object(u.useState)(""),w=Object(o.a)(g,2),y=w[0],C=w[1],N=Object(u.useState)(null),S=Object(o.a)(N,2),P=S[0],k=S[1],T=Object(u.useState)(null),A=Object(o.a)(T,2),I=A[0],D=A[1];Object(u.useEffect)((function(){m.getAll().then((function(e){c(e)})).catch((function(e){D("The data from the server couldn't be reached"),J(5)}))}),[]);var E=function(){m.getAll().then((function(e){c(e)})).catch((function(e){D("The data from the server couldn't be reached"),J(5)}))},L=function(){j(""),v("")},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;setTimeout((function(){k(null),D(null)}),1e3*e)},B=y.match(/\d/)?t.filter((function(e){return e.number.includes(y)})):"string"===typeof y?t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})):t,F=function(e,n){var c=t.find((function(e){return e.name===n})).id,r=t.find((function(e){return e.id===c})),o=Object(a.a)(Object(a.a)({},r),{},{number:e});m.update(c,o).then((function(e){if(404===e.status)throw new Error("404");E(),k("".concat(r.name,"'s number was successfully updated")),J(5)})).catch((function(e){D("Information of ".concat(r.name," has already been deleted")),J(5)})),L()};return Object(i.jsxs)("main",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(s,{search:y,handleSearchChange:function(e){C(e.target.value)}}),Object(i.jsx)("div",{className:"notification-box",children:Object(i.jsx)(h,{message:P,error:I})}),Object(i.jsx)("h3",{children:"Add new"}),Object(i.jsx)(l,{addPerson:function(e){if(e.preventDefault(),E(),f&&x){var n={name:f.trim(),number:x.trim()},r=t.findIndex((function(e){return e.name===f.trim()}))>-1,a=t.findIndex((function(e){return e.number===x.trim()}))>-1;r||a?r&&!a?window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))?F(n.number,n.name).catch((function(e){D(e.response.data.error),J(3)})):console.log("canceled"):!r&&a?(D("Given phonenumber is already in use"),J()):r&&a&&(D("".concat(f.trim()," has already been added to phonebook")),J()):m.create(n).then((function(e){c(t.concat(e)),k("".concat(e.name," was successfully added")),J(5)})).catch((function(e){D(e.response.data.error),J(6)})),L()}},newName:f,newNumber:x,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){v(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{personsToShow:B,removePerson:function(e){var n=e.target.value,r=t.find((function(e){return e.id===n}));window.confirm("Delete ".concat(r.name," ?"))?m.remove(n).then((function(){c(t.filter((function(e){return e.id!==n}))),k("Successfully deleted ".concat(r.name)),J(3)})).catch((function(e){D("The person could not be found. Please refresh and retry."),J()})):console.log("Delete canceled")},setPersons:c})]})};t(42);r.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.9bf7fd00.chunk.js.map